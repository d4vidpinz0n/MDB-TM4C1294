


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000         
    3 00000000         ;functions from UARTInts.s
    4 00000000                 IMPORT           UART_Init
    5 00000000                 IMPORT           UART_InChar
    6 00000000                 IMPORT           UART_OutChar
    7 00000000                 IMPORT           UART0_Handler
    8 00000000                 IMPORT           UART_OutString
    9 00000000                 IMPORT           UART_InUDec
   10 00000000                 IMPORT           UART_OutUDec
   11 00000000                 IMPORT           UART_InUHex
   12 00000000                 IMPORT           UART_OutUHex
   13 00000000                 IMPORT           UART_InString
   14 00000000                 IMPORT           UART_HighStickParity
   15 00000000                 IMPORT           UART_LowStickParity
   16 00000000         
   17 00000000                 AREA             DATA, ALIGN=2
   18 00000000 00000024 
                       CMDLEN  EQU              36          ; max size of comma
                                                            nd
   19 00000000 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 Command SPACE            (CMDLEN)
   20 00000024 00      ChkSum  SPACE            1
   21 00000025                 EXPORT           Command     ; global only for o
                                                            bservation using de
                                                            bugger
   22 00000025         
   23 00000025                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   24 00000000                 THUMB
   25 00000000         ;-----------MDB_SendAddress-----------
   26 00000000         ; Envia la direccion de un periferico
   27 00000000         ; activa High Stick Parity bit
   28 00000000         ; Input : R0 8-bit address
   29 00000000         ; Output: none
   30 00000000         MDB_SendAddress
   31 00000000 B503            PUSH             {R0, R1, LR} ; save current val
                                                            ue of R0, R1 and LR
                                                            
   32 00000002 F7FF FFFE       BL               UART_HighStickParity ; set high
                                                             stick parity
   33 00000006 F7FF FFFE       BL               UART_OutChar ; note: modifies R
                                                            0 and R1
   34 0000000A BD03            POP              {R0, R1, PC} ; restore previous
                                                             value of R0 into R
                                                            0, R1 into R1, and 
                                                            LR into PC (return)
                                                            
   35 0000000C         



ARM Macro Assembler    Page 2 


   36 0000000C         ;-----------MDB_SendCommand-----------
   37 0000000C         ; Envia un comando a un periferico
   38 0000000C         ; activa Low Stick Parity
   39 0000000C         ; Input : R0 address (for chkSum), R1 pointer to command
                       s, R2 number of command/data bytes to be send
   40 0000000C         ; Output: none
   41 0000000C         ; Modifies: none, all used Register are pushed and poped
                       
   42 0000000C         MDB_SendCommand
   43 0000000C B53F            PUSH             {R0, R1, R2, R3, R4, R5, LR} ; 
                                                            save current value 
                                                            of R0, R1, R2, R3, 
                                                            R4, R5 and LR
   44 0000000E F7FF FFFE       BL               UART_LowStickParity ; set to lo
                                                            w stick parity
   45 00000012 4605            MOV              R5, R0      ; R5 = R0 save init
                                                            ial value of ChkSum
                                                            
   46 00000014 460C            MOV              R4, R1      ; R4 = R1 (save the
                                                             command pointer)
   47 00000016 4613            MOV              R3, R2      ; R3 = R2 (save num
                                                            ber of command/data
                                                             bytes)
   48 00000018 F04F 0200       MOV              R2, #0      ; initialize counte
                                                            r, contador de dato
                                                            s enviados
   49 0000001C         outCommandLoop
   50 0000001C 429A            CMP              R2, R3      ; is counter = numb
                                                            er of commands to s
                                                            end ?
   51 0000001E D008            BEQ              outCommandDone ; if so, its don
                                                            e, skip to 'outComm
                                                            andDone'
   52 00000020 6820            LDR              R0, [R4]    ; R0 = [R4] carga e
                                                            l byte a ser enviad
                                                            o
   53 00000022 4405            ADD              R5, R5, R0  ; actualiza chksum 
                                                            byte
   54 00000024 F7FF FFFE       BL               UART_OutChar ; envia el byte en
                                                             R0, note: modifies
                                                             R0 and R1
   55 00000028 F104 0401       ADD              R4, R4, #1  ; R4 = R4 + 1 incre
                                                            menta el command po
                                                            inter
   56 0000002C F102 0201       ADD              R2, R2, #1  ; R2 = R2 + 1 incre
                                                            menta el contador
   57 00000030 E7F4            B                outCommandLoop
   58 00000032         outCommandDone
   59 00000032 4628            MOV              R0, R5      ; R0 = R5 Copy chks
                                                            um to R0
   60 00000034 F7FF FFFE       BL               UART_OutChar ; send chksum byte
                                                            
   61 00000038         ; restore previous value of R0 into R0, R1 into R1, R2 i
                       nto R2
   62 00000038 F7FF FFFE       BL               UART_HighStickParity ; again se
                                                            t High stick parity
                                                            
   63 0000003C BD3F            POP              {R0, R1, R2, R3, R4, R5, PC} ; 
                                                            R3 into R3, R4 into



ARM Macro Assembler    Page 3 


                                                             R4, R5, into R5 an
                                                            d LR into PC (retur
                                                            n)
   64 0000003E         
   65 0000003E         
   66 0000003E         ;-----------MDB_SendACK-----------
   67 0000003E         ; Envia el chk sum byte
   68 0000003E         ; activa al final el High Stick Parity
   69 0000003E         ; Input : nono
   70 0000003E         ; Output: none
   71 0000003E         ; Modifies: none, all used Register are pushed and poped
                       
   72 0000003E         MDB_SendACK
   73 0000003E B500            PUSH             {LR}
   74 00000040 F7FF FFFE       BL               UART_LowStickParity ; set Low s
                                                            tick parity
   75 00000044         
   76 00000044         
   77 00000044 F7FF FFFE       BL               UART_HighStickParity ; again se
                                                            t High stick parity
                                                            
   78 00000048 BD00            POP              {PC}
   79 0000004A         
   80 0000004A         
   81 0000004A 00 00           ALIGN                        ; make sure the end
                                                             of this section is
                                                             aligned
   82 0000004C                 END                          ; end of file
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\mdb.d -o.\objects\mdb.o -IC:\Users\mode_\Documents\Fm
at\MicroControladores\KeilProjects\Cash_flow\RTE\_Target_1 -IC:\Keil_v5\ARM\PAC
K\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C129 -IC:\Keil_v5\ARM\CMSIS\Include --p
redefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 522" --predefine="
TM4C1294NCPDT SETA 1" --list=.\listings\mdb.lst mdb.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

ChkSum 00000024

Symbol: ChkSum
   Definitions
      At line 20 in file mdb.s
   Uses
      None
Comment: ChkSum unused
Command 00000000

Symbol: Command
   Definitions
      At line 19 in file mdb.s
   Uses
      At line 21 in file mdb.s
Comment: Command used once
DATA 00000000

Symbol: DATA
   Definitions
      At line 17 in file mdb.s
   Uses
      None
Comment: DATA unused
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 23 in file mdb.s
   Uses
      None
Comment: .text unused
MDB_SendACK 0000003E

Symbol: MDB_SendACK
   Definitions
      At line 72 in file mdb.s
   Uses
      None
Comment: MDB_SendACK unused
MDB_SendAddress 00000000

Symbol: MDB_SendAddress
   Definitions
      At line 30 in file mdb.s
   Uses
      None
Comment: MDB_SendAddress unused
MDB_SendCommand 0000000C

Symbol: MDB_SendCommand
   Definitions
      At line 42 in file mdb.s
   Uses
      None
Comment: MDB_SendCommand unused
outCommandDone 00000032

Symbol: outCommandDone
   Definitions
      At line 58 in file mdb.s
   Uses
      At line 51 in file mdb.s
Comment: outCommandDone used once
outCommandLoop 0000001C

Symbol: outCommandLoop
   Definitions
      At line 49 in file mdb.s
   Uses
      At line 57 in file mdb.s
Comment: outCommandLoop used once
6 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

CMDLEN 00000024

Symbol: CMDLEN
   Definitions
      At line 18 in file mdb.s
   Uses
      At line 19 in file mdb.s
Comment: CMDLEN used once
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

UART0_Handler 00000000

Symbol: UART0_Handler
   Definitions
      At line 7 in file mdb.s
   Uses
      None
Comment: UART0_Handler unused
UART_HighStickParity 00000000

Symbol: UART_HighStickParity
   Definitions
      At line 14 in file mdb.s
   Uses
      At line 32 in file mdb.s
      At line 62 in file mdb.s
      At line 77 in file mdb.s

UART_InChar 00000000

Symbol: UART_InChar
   Definitions
      At line 5 in file mdb.s
   Uses
      None
Comment: UART_InChar unused
UART_InString 00000000

Symbol: UART_InString
   Definitions
      At line 13 in file mdb.s
   Uses
      None
Comment: UART_InString unused
UART_InUDec 00000000

Symbol: UART_InUDec
   Definitions
      At line 9 in file mdb.s
   Uses
      None
Comment: UART_InUDec unused
UART_InUHex 00000000

Symbol: UART_InUHex
   Definitions
      At line 11 in file mdb.s
   Uses
      None
Comment: UART_InUHex unused
UART_Init 00000000

Symbol: UART_Init
   Definitions
      At line 4 in file mdb.s
   Uses
      None
Comment: UART_Init unused
UART_LowStickParity 00000000



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
External symbols


Symbol: UART_LowStickParity
   Definitions
      At line 15 in file mdb.s
   Uses
      At line 44 in file mdb.s
      At line 74 in file mdb.s

UART_OutChar 00000000

Symbol: UART_OutChar
   Definitions
      At line 6 in file mdb.s
   Uses
      At line 33 in file mdb.s
      At line 54 in file mdb.s
      At line 60 in file mdb.s

UART_OutString 00000000

Symbol: UART_OutString
   Definitions
      At line 8 in file mdb.s
   Uses
      None
Comment: UART_OutString unused
UART_OutUDec 00000000

Symbol: UART_OutUDec
   Definitions
      At line 10 in file mdb.s
   Uses
      None
Comment: UART_OutUDec unused
UART_OutUHex 00000000

Symbol: UART_OutUHex
   Definitions
      At line 12 in file mdb.s
   Uses
      None
Comment: UART_OutUHex unused
12 symbols
356 symbols in table
